# üöÄ CONSIGNMENTS MODULE - FINAL CORRECTED BRIEF
## Complete Module Build (Using Lightspeed Consignment Model)

**Date:** October 31, 2025
**Status:** FINAL CORRECTED - Ready for Development
**Key Change:** Uses Lightspeed native consignment model (NOT separate PO tables)

---

## ‚ö° CRITICAL CLARIFICATION

**You are NOT creating separate PO_* tables.**

Instead, you're using **Lightspeed's native CONSIGNMENT MODEL**:
- ‚úÖ `QUEUE_CONSIGNMENTS` = Shadow table of Lightspeed consignments
- ‚úÖ `QUEUE_CONSIGNMENT_PRODUCTS` = Line items synced from Lightspeed
- ‚úÖ Consignments handle ALL transfer types (PO, Stock Transfer, Consignment, Staff)
- ‚úÖ Single unified model through Lightspeed

---

## üóÇÔ∏è DATABASE SCHEMA (CORRECTED)

### TABLE PREFIXES (CORRECTED)

```
VEND_*                  = Lightspeed master data (read from Lightspeed)
QUEUE_*                 = CIS shadow/cache of Lightspeed data
TRANSFER_*              = CIS transfer records (links to consignments)
STAFF_*                 = Staff transfer records
SIGNATURE_*             = Signature capture
BARCODE_*               = Barcode scanning
*_AUDIT_LOG             = CIS audit trails
*_STATUS_LOG            = CIS status transitions
```

### A. VEND_* TABLES (Read from Lightspeed)

```sql
-- VEND_CONSIGNMENTS (Lightspeed consignments - READ ONLY from Vend)
VEND_CONSIGNMENTS (
  id (UUID - from Lightspeed),
  outlet_id (UUID),
  source_outlet_id (UUID),
  type (SUPPLIER|OUTLET|RETURN|STOCKTAKE),
  status (OPEN|SENT|DISPATCHED|RECEIVED|CANCELLED|STOCKTAKE),
  reference (VARCHAR - CIS reference),
  vend_version (INT - for optimistic locking),
  created_at,
  updated_at
)

-- VEND_CONSIGNMENT_PRODUCTS (Line items - READ from Lightspeed)
VEND_CONSIGNMENT_PRODUCTS (
  id (UUID),
  consignment_id (FK ‚Üí VEND_CONSIGNMENTS),
  product_id (UUID),
  sku,
  count (quantity),
  synced_at
)

-- VEND_PRODUCTS (Cached product master)
VEND_PRODUCTS (
  id (UUID),
  sku,
  name,
  category,
  price,
  synced_at
)

-- VEND_OUTLETS (Cached outlet master)
VEND_OUTLETS (
  id (UUID),
  name,
  location,
  synced_at
)
```

### B. QUEUE_* TABLES (CIS Cache/Shadow of Lightspeed)

```sql
-- QUEUE_CONSIGNMENTS (Shadow of VEND_CONSIGNMENTS for fast lookup)
QUEUE_CONSIGNMENTS (
  id (PK),
  vend_consignment_id (FK ‚Üí VEND_CONSIGNMENTS, unique),
  transfer_id (FK ‚Üí transfers, for linking),
  type (SUPPLIER|OUTLET|RETURN|STOCKTAKE),
  status (OPEN|SENT|DISPATCHED|RECEIVED|CANCELLED|STOCKTAKE),
  outlet_from_id (UUID),
  outlet_to_id (UUID),
  vend_version (INT - optimistic lock),
  sync_status (pending|synced|error),
  last_sync_at,
  sync_error,
  created_at,
  updated_at
)

-- QUEUE_CONSIGNMENT_PRODUCTS (Shadow of VEND_CONSIGNMENT_PRODUCTS)
QUEUE_CONSIGNMENT_PRODUCTS (
  id (PK),
  queue_consignment_id (FK),
  vend_product_id (UUID),
  sku,
  expected_count,
  received_count,
  sync_status (pending|synced|error),
  created_at
)

-- QUEUE_JOBS (Background job queue)
QUEUE_JOBS (
  id (PK),
  job_type (transfer.create_consignment, transfer.sync_to_lightspeed),
  payload (JSON),
  status (pending|processing|completed|failed),
  priority (1-10),
  attempts,
  max_attempts,
  last_error,
  created_at
)

-- QUEUE_WEBHOOK_EVENTS (Inbound Lightspeed webhooks)
QUEUE_WEBHOOK_EVENTS (
  id (PK),
  webhook_type (consignment.updated, consignment.received),
  payload (JSON),
  status (pending|processing|completed|failed),
  processed_at,
  error_message,
  created_at
)
```

### C. TRANSFER_* TABLES (CIS Transfer Records)

```sql
-- TRANSFERS (CIS transfer header - NOW THE PRIMARY)
TRANSFERS (
  id (PK),
  consignment_id (FK ‚Üí QUEUE_CONSIGNMENTS, nullable - links to Lightspeed),
  vend_consignment_id (VARCHAR - direct link to Lightspeed),
  vend_transfer_id (VARCHAR - old, for backwards compat),
  outlet_from (VARCHAR - source outlet UUID),
  outlet_to (VARCHAR - dest outlet UUID),
  transfer_type (CONSIGNMENT|STOCK_TRANSFER|RETURN|STOCKTAKE),
  state (OPEN|PACKING|SENT|RECEIVED|COMPLETED|CANCELLED),
  reference (VARCHAR - user reference),
  public_id (VARCHAR - public facing ID),
  created_by (INT - user_id),
  approved_by (INT - user_id),
  received_by (INT - user_id),
  approval_tier_required (STORE_MANAGER|RETAIL_OPS|DIRECTOR),
  created_at,
  approved_at,
  received_at,
  completed_at,
  updated_at
)

-- TRANSFER_ITEMS (Line items)
TRANSFER_ITEMS (
  id (PK),
  transfer_id (FK),
  vend_product_id (UUID),
  sku,
  qty_sent_total,
  qty_received_total,
  variance_reason,
  created_at
)

-- TRANSFER_STATUS_LOG (Immutable log)
TRANSFER_STATUS_LOG (
  id (PK),
  transfer_id (FK),
  from_state,
  to_state,
  reason,
  user_id,
  created_at
)

-- TRANSFER_AUDIT_LOG (Detailed audit)
TRANSFER_AUDIT_LOG (
  id (PK),
  transfer_id (FK),
  action (created|approved|received|completed),
  user_id,
  old_values (JSON),
  new_values (JSON),
  created_at
)
```

### D. STAFF_* TABLES (Staff Transfers)

```sql
-- STAFF_TRANSFERS (Staff personal item transfers)
STAFF_TRANSFERS (
  id (PK),
  from_staff_id (FK ‚Üí users),
  to_staff_id (FK ‚Üí users),
  from_outlet_id (UUID),
  to_outlet_id (UUID),
  status (INITIATED|APPROVED|COMPLETED|CANCELLED),
  transfer_reason,
  created_at,
  approved_at,
  completed_at
)

-- STAFF_TRANSFER_ITEMS (Items being transferred)
STAFF_TRANSFER_ITEMS (
  id (PK),
  staff_transfer_id (FK),
  vend_product_id (UUID),
  sku,
  quantity,
  condition (new|used|damaged),
  created_at
)

-- STAFF_TRANSFER_LOG (Audit trail)
STAFF_TRANSFER_LOG (
  id (PK),
  staff_transfer_id (FK),
  action,
  user_id,
  notes,
  created_at
)
```

### E. SIGNATURE & RECEIVING TABLES

```sql
-- RECEIPT_SIGNATURES (Signature capture)
RECEIPT_SIGNATURES (
  id (PK),
  transfer_id (FK ‚Üí transfers),
  consignment_id (FK ‚Üí QUEUE_CONSIGNMENTS, nullable),
  staff_id (FK ‚Üí users),
  signature_type (checkbox|digital|biometric),
  signature_file_path (VARCHAR - /var/receipts/signatures/[outlet_id]/[receipt_id]/),
  signature_timestamp,
  required (BOOLEAN),
  outlet_configured (BOOLEAN),
  supplier_configured (BOOLEAN),
  created_at
)

-- RECEIPT_AUDIT_LOG (Signature audit)
RECEIPT_AUDIT_LOG (
  id (PK),
  signature_id (FK),
  action (created|viewed|verified|rejected),
  user_id,
  metadata (JSON),
  created_at
)

-- BARCODE_SCANS (Barcode scan history)
BARCODE_SCANS (
  id (PK),
  transfer_id (FK),
  consignment_id (FK ‚Üí QUEUE_CONSIGNMENTS),
  barcode_value (VARCHAR),
  barcode_format (EAN13|UPC|Code128|CUSTOM),
  vend_product_id (UUID),
  sku,
  scan_timestamp,
  qty_scanned,
  audio_feedback (tone1|tone2|tone3|none),
  created_at
)

-- BARCODE_CONFIGURATION (Per-outlet config)
BARCODE_CONFIGURATION (
  outlet_id (FK),
  enabled (BOOLEAN),
  format_preference,
  audio_enabled (BOOLEAN),
  created_at
)
```

### F. APPROVAL & WORKFLOW TABLES

```sql
-- APPROVAL_WORKFLOW (Multi-tier approval tracking)
APPROVAL_WORKFLOW (
  id (PK),
  transfer_id (FK ‚Üí transfers),
  consignment_id (FK ‚Üí QUEUE_CONSIGNMENTS),
  total_amount (DECIMAL),
  approval_tier_required (STORE_MANAGER|RETAIL_OPS|DIRECTOR),
  current_approver_id (INT ‚Üí users),
  status (PENDING|APPROVED|REJECTED|CANCELLED),
  notes (TEXT),
  created_at,
  completed_at
)

-- APPROVAL_AUDIT_LOG (Approval history)
APPROVAL_AUDIT_LOG (
  id (PK),
  approval_workflow_id (FK),
  action (requested|approved|rejected),
  user_id,
  reason,
  created_at
)
```

---

## üîÑ WORKFLOW (How Consignments Work)

### 1. Create Transfer (CIS)
```
User creates transfer in CIS
‚Üì
INSERT into transfers (state='OPEN')
‚Üì
Ready for packing/counting
```

### 2. Pack & Count (CIS)
```
Staff count items in transfer
‚Üì
INSERT into transfer_items (qty_sent_total)
‚Üì
UPDATE transfers (state='PACKING')
```

### 3. Submit for Approval (CIS)
```
Manager submits transfer
‚Üì
INSERT into approval_workflow (status='PENDING')
‚Üì
Notify appropriate approver based on tier
```

### 4. Approve (CIS)
```
Approver reviews & approves
‚Üì
UPDATE approval_workflow (status='APPROVED')
‚Üì
UPDATE transfers (state='READY_FOR_LIGHTSPEED', approved_by=user_id)
```

### 5. Create Consignment in Lightspeed
```
Background job triggered
‚Üì
POST /consignments to Lightspeed
  {
    "type": "OUTLET",
    "source_outlet_id": transfer.outlet_from,
    "outlet_id": transfer.outlet_to,
    "reference": "CIS-{transfer_id}"
  }
‚Üì
Lightspeed returns consignment UUID
‚Üì
INSERT into queue_consignments (vend_consignment_id, transfer_id)
‚Üì
UPDATE transfers (vend_consignment_id, consignment_id)
```

### 6. Upload Products to Lightspeed
```
Background job loops through transfer_items
‚Üì
For each item:
  POST /consignment_products to Lightspeed
    {
      "consignment_id": vend_consignment_id,
      "product_id": vend_product_id,
      "count": qty_sent_total
    }
‚Üì
INSERT into queue_consignment_products
```

### 7. Mark Sent (CIS)
```
User marks transfer as shipped
‚Üì
UPDATE transfers (state='SENT')
‚Üì
UPDATE queue_consignments (status='SENT')
‚Üì
(Optional) PATCH consignment status in Lightspeed
```

### 8. Receive at Destination (CIS)
```
Receiving staff access receiving UI
‚Üì
View consignment details (loaded from queue_consignments)
‚Üì
Barcode scan products (optional audio feedback)
‚Üì
Capture signature (checkbox + staff ID)
‚Üì
UPDATE transfer_items (qty_received_total)
‚Üì
UPDATE transfers (state='RECEIVED')
‚Üì
UPDATE queue_consignments (status='RECEIVED')
‚Üì
Trigger inventory sync in CIS
‚Üì
(Optional) PATCH consignment status in Lightspeed
```

### 9. Complete Transfer (CIS)
```
Final inventory reconciliation
‚Üì
UPDATE transfers (state='COMPLETED')
‚Üì
INSERT transfer_audit_log (action='COMPLETED')
‚Üì
Notify stakeholders
```

---

## üéØ KEY FEATURES (From Q1-Q15)

### User Roles (5 Total)
- Director (approve $5k+)
- Comms Manager (approve $2k-$5k)
- Retail Ops Manager (approve $2k-$5k)
- Store Manager (approve $0-$2k, receive goods)
- Store Assistant (perform receiving, assist)

### Multi-Tier Approval
```
$0 - $2,000         ‚Üí Store Manager approval
$2,000 - $5,000     ‚Üí Retail Ops Manager OR Comms Manager approval
$5,000+             ‚Üí Director ONLY
```

### Signature Capture
- ‚úÖ Method: Checkbox + Staff ID auth
- ‚úÖ Who: Receiving staff member
- ‚úÖ Storage: Audit trail DB + PNG file system
- ‚úÖ Configurable: Per outlet/supplier

### Barcode Scanning
- ‚úÖ Optional (not mandatory)
- ‚úÖ Any barcode format supported
- ‚úÖ 3 audio tones: success/warning/info
- ‚úÖ Accept any quantity (no blocking)

### Lightspeed Sync
- ‚úÖ At RECEIVE TIME (not creation)
- ‚úÖ Idempotent (safe to retry)
- ‚úÖ Queue-based processing
- ‚úÖ Error recovery

### Photos
- ‚úÖ 5 per product
- ‚úÖ Auto-resize to 1080p
- ‚úÖ File system storage

### Email Notifications
- ‚úÖ Supplier notified when consignment created
- ‚úÖ Weekly management reports
- ‚úÖ Store manager overview

### AI Logging (CISLogger)
- ‚úÖ Every action logged
- ‚úÖ Audit trail for compliance
- ‚úÖ Entity tracking (TRANSFER, CONSIGNMENT, etc.)

---

## üèóÔ∏è MODULE STRUCTURE

```
modules/consignments/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransferController          (Create/list/manage transfers)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConsignmentController       (View consignments)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReceivingController         (Receive workflow)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApprovalController          (Approval workflow)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BarcodeController           (Barcode scanning)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Requests/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Middleware/
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Transfer                        (inherits from BaseModel)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransferItem
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Consignment                     (shadow of Vend)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConsignmentProduct
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApprovalWorkflow
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Signature
‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransferService                 (Create/manage transfers)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConsignmentService              (Sync with Lightspeed)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LightspeedSyncService           (API integration)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApprovalService                 (Multi-tier approval)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReceivingService                (Receiving workflow)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuditService                    (CISLogger integration)
‚îÇ   ‚îú‚îÄ‚îÄ Jobs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateConsignmentJob            (BG job)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SyncToLightspeedJob             (BG job)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProcessWebhookJob               (BG job)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GenerateReportJob               (BG job)
‚îÇ   ‚îú‚îÄ‚îÄ Traits/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HasApprovalWorkflow
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HasAuditLog
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HasStatusTransitions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HasDraftStatus
‚îÇ   ‚îî‚îÄ‚îÄ Exceptions/
‚îÇ       ‚îú‚îÄ‚îÄ ApprovalRequiredException
‚îÇ       ‚îú‚îÄ‚îÄ LightspeedSyncException
‚îÇ       ‚îî‚îÄ‚îÄ ValidationException
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create_transfers_table.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create_queue_consignments_table.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create_approval_workflow_table.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ create_signature_table.php
‚îÇ   ‚îî‚îÄ‚îÄ seeders/
‚îÇ       ‚îî‚îÄ‚îÄ TransferSeeder.php
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ api.php                             (JSON API)
‚îÇ   ‚îú‚îÄ‚îÄ web.php                             (Web UI)
‚îÇ   ‚îî‚îÄ‚îÄ webhook.php                         (Lightspeed webhooks)
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transfers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.blade.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ list.blade.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ detail.blade.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ receiving/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ receiving-ui.blade.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ barcode-scanner.blade.php
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ signature-capture.blade.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ approvals/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ pending.blade.php
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ history.blade.php
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ consignments.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ receiving.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ barcode.css
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ consignments.js
‚îÇ       ‚îú‚îÄ‚îÄ barcode-scanner.js
‚îÇ       ‚îú‚îÄ‚îÄ signature-capture.js
‚îÇ       ‚îú‚îÄ‚îÄ real-time-updates.js
‚îÇ       ‚îî‚îÄ‚îÄ audio-feedback.js
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ module.php
‚îÇ   ‚îú‚îÄ‚îÄ approval.php
‚îÇ   ‚îú‚îÄ‚îÄ lightspeed.php
‚îÇ   ‚îî‚îÄ‚îÄ barcode.php
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ Unit/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApprovalTest.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransferTest.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LightspeedSyncTest.php
‚îÇ   ‚îú‚îÄ‚îÄ Feature/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransferWorkflowTest.php
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReceivingTest.php
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ApprovalTest.php
‚îÇ   ‚îî‚îÄ‚îÄ Integration/
‚îÇ       ‚îú‚îÄ‚îÄ LightspeedIntegrationTest.php
‚îÇ       ‚îú‚îÄ‚îÄ WebhookHandlingTest.php
‚îÇ       ‚îî‚îÄ‚îÄ InventorySyncTest.php
‚îú‚îÄ‚îÄ _kb/
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md
‚îÇ   ‚îú‚îÄ‚îÄ LIGHTSPEED_INTEGRATION.md
‚îÇ   ‚îú‚îÄ‚îÄ WORKFLOW.md
‚îÇ   ‚îî‚îÄ‚îÄ PEARCE_ANSWERS_SESSION_1.md
‚îî‚îÄ‚îÄ bootstrap.php
```

---

## ‚úÖ WHAT TO BUILD

### Phase 1: Core Models & Database
- [ ] Create QUEUE_CONSIGNMENTS table
- [ ] Create TRANSFERS table (linking to consignments)
- [ ] Create TRANSFER_ITEMS table
- [ ] Create APPROVAL_WORKFLOW table
- [ ] Create migrations (idempotent)

### Phase 2: Transfer Management
- [ ] TransferController (create, list, show)
- [ ] TransferService (business logic)
- [ ] Transfer models with relationships
- [ ] Tests for transfer lifecycle

### Phase 3: Approval System
- [ ] ApprovalController (approve/reject)
- [ ] ApprovalService (multi-tier logic)
- [ ] Approval models
- [ ] Tests for approval workflows

### Phase 4: Lightspeed Integration
- [ ] LightspeedSyncService (API calls)
- [ ] ConsignmentService (Lightspeed shadow)
- [ ] Background jobs (queue processing)
- [ ] Webhook handlers (inbound events)
- [ ] Tests for Lightspeed sync

### Phase 5: Receiving Workflow
- [ ] ReceivingController (UI & logic)
- [ ] ReceivingService (business logic)
- [ ] Barcode scanning integration
- [ ] Signature capture
- [ ] Photo upload
- [ ] Tests for receiving flow

### Phase 6: AI Logging
- [ ] CISLogger integration (all actions)
- [ ] Audit trail generation
- [ ] Compliance tracking

### Phase 7: Testing & Docs
- [ ] Unit tests (95%+ coverage)
- [ ] Integration tests
- [ ] API documentation
- [ ] Module documentation

---

## üöÄ NEXT STEPS

1. **Continue Gap Analysis** (Q16-Q35)
2. **Setup Base Module** (Inheritance template)
3. **Build Consignments Module** (With all features)

---

**END OF CORRECTED BRIEF**

Key Difference: **NO separate PO_* tables.** All managed through Lightspeed's native consignment model with CIS shadow tables.
