# ğŸ“° NEWS FEED INTEGRATION - VISUAL SUMMARY

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    NEWS AGGREGATOR DATA FLOW                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    STEP 1: ADD RSS FEEDS
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  news_sources       â”‚ â† Add vape industry RSS URLs
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
    â”‚  â€¢ Vaping Post      â”‚
    â”‚  â€¢ ECigIntel        â”‚
    â”‚  â€¢ Vaping360        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    STEP 2: AUTOMATED CRAWLER
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  cron-crawler.php   â”‚ â† Runs every hour (cron job)
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
    â”‚  1. Fetch RSS XML   â”‚
    â”‚  2. Parse articles  â”‚
    â”‚  3. Download images â”‚
    â”‚  4. Deduplicate     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    STEP 3: DATABASE STORAGE
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  news_articles      â”‚ â† Stores crawled content
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
    â”‚  â€¢ Title            â”‚
    â”‚  â€¢ Content          â”‚
    â”‚  â€¢ Image URL        â”‚
    â”‚  â€¢ Published date   â”‚
    â”‚  â€¢ View/click count â”‚
    â”‚  â€¢ Pinned status    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    STEP 4: QUERY INTERFACE
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  FeedProvider.php   â”‚ â† Provides data to UI
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
    â”‚  â€¢ getUnifiedFeed() â”‚ â† Mix internal + external
    â”‚  â€¢ getTrending()    â”‚ â† Most viewed
    â”‚  â€¢ getPinned()      â”‚ â† Important articles
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    STEP 5: PREMIUM FEED UI
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  dashboard-feed.php                                         â”‚
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
    â”‚                                                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ LEFT   â”‚  â”‚   CENTER FEED        â”‚  â”‚   RIGHT      â”‚   â”‚
    â”‚  â”‚        â”‚  â”‚                      â”‚  â”‚              â”‚   â”‚
    â”‚  â”‚ Quick  â”‚  â”‚ ğŸ“° NEWS ARTICLE      â”‚  â”‚ Today's      â”‚   â”‚
    â”‚  â”‚ Action â”‚  â”‚ [IMAGE]              â”‚  â”‚ Stats        â”‚   â”‚
    â”‚  â”‚        â”‚  â”‚ FDA Announces...     â”‚  â”‚              â”‚   â”‚
    â”‚  â”‚ Store  â”‚  â”‚ ğŸŒ Source ğŸ‘ï¸ 127     â”‚  â”‚ Low Stock    â”‚   â”‚
    â”‚  â”‚ Accuracyâ”‚ â”‚ [Read Article]       â”‚  â”‚ Alerts       â”‚   â”‚
    â”‚  â”‚        â”‚  â”‚                      â”‚  â”‚              â”‚   â”‚
    â”‚  â”‚ Staff  â”‚  â”‚ ğŸ›’ NEW ORDER         â”‚  â”‚ Top          â”‚   â”‚
    â”‚  â”‚ Online â”‚  â”‚ Customer: John       â”‚  â”‚ Sellers      â”‚   â”‚
    â”‚  â”‚        â”‚  â”‚ Total: $85.50        â”‚  â”‚              â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    STEP 6: VIEW TOGGLE
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  index-ultra.php    â”‚ â† Main dashboard
    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
    â”‚                     â”‚
    â”‚  [Toggle Button]    â”‚ â† Click to switch
    â”‚                     â”‚
    â”‚  IF feed view:      â”‚
    â”‚    â†’ dashboard-feed â”‚
    â”‚  ELSE:              â”‚
    â”‚    â†’ standard dash  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         FILE STRUCTURE                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/public_html/
â”‚
â”œâ”€â”€ index-ultra.php                    ğŸ›ï¸ Main dashboard + toggle
â”‚   â””â”€â”€ Includes: dashboard-feed.php (if feed view)
â”‚
â”œâ”€â”€ modules/
â”‚   â”‚
â”‚   â”œâ”€â”€ news-aggregator/               ğŸ“° News module
â”‚   â”‚   â”œâ”€â”€ cron-crawler.php           â° Cron entry point
â”‚   â”‚   â”œâ”€â”€ AggregatorService.php      ğŸ•·ï¸ RSS crawler
â”‚   â”‚   â”œâ”€â”€ FeedProvider.php           ğŸ” Query interface
â”‚   â”‚   â”œâ”€â”€ AdminController.php        âš™ï¸ Admin panel
â”‚   â”‚   â”œâ”€â”€ installer.php              ğŸ’¾ DB setup
â”‚   â”‚   â”œâ”€â”€ check-news.sh              âœ… Verification
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“š Documentation:
â”‚   â”‚       â”œâ”€â”€ SETUP_GUIDE.md         ğŸš€ Full setup steps
â”‚   â”‚       â”œâ”€â”€ HOW_IT_WORKS.md        ğŸ”„ Complete explanation
â”‚   â”‚       â”œâ”€â”€ QUICK_REF.md           âš¡ Quick commands
â”‚   â”‚       â””â”€â”€ README.md              ğŸ“– Features
â”‚   â”‚
â”‚   â””â”€â”€ base/
â”‚       â””â”€â”€ templates/
â”‚           â””â”€â”€ vape-ultra/
â”‚               â””â”€â”€ views/
â”‚                   â””â”€â”€ dashboard-feed.php  ğŸ¨ Premium feed UI
â”‚
â””â”€â”€ cache/
    â””â”€â”€ news-images/                   ğŸ–¼ï¸ Cached article images


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      DATABASE SCHEMA                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  news_sources       â”‚ ğŸ”— RSS feed URLs
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ name                â”‚ "Vaping Post"
â”‚ url                 â”‚ "https://vapingpost.com/feed/"
â”‚ type                â”‚ "rss" | "html" | "api"
â”‚ category            â”‚ "vaping" | "regulation"
â”‚ crawl_frequency     â”‚ 3600 (seconds)
â”‚ is_active           â”‚ 1 = active
â”‚ last_crawled_at     â”‚
â”‚ next_crawl_at       â”‚
â”‚ logo_url            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ 1:N
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  news_articles      â”‚ ğŸ“° Crawled articles
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ source_id (FK)      â”‚ â†’ news_sources.id
â”‚ external_id         â”‚ RSS guid (dedup)
â”‚ title               â”‚ "FDA Announces..."
â”‚ content             â”‚ Full article text
â”‚ summary             â”‚ Short preview
â”‚ external_url        â”‚ Original article link
â”‚ author              â”‚ "John Smith"
â”‚ published_at        â”‚ 2025-01-15 14:30:00
â”‚ image_url           â”‚ /cache/news-images/fda.jpg
â”‚ category            â”‚ "regulation"
â”‚ view_count          â”‚ 127
â”‚ click_count         â”‚ 34
â”‚ is_pinned           â”‚ 0 | 1
â”‚ priority            â”‚ 0-100
â”‚ metadata            â”‚ JSON
â”‚ created_at          â”‚
â”‚ updated_at          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ 1:N
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  news_crawl_log     â”‚ ğŸ“Š Crawler history
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ source_id (FK)      â”‚ â†’ news_sources.id
â”‚ articles_found      â”‚ 15
â”‚ articles_new        â”‚ 3
â”‚ articles_updated    â”‚ 2
â”‚ duration_ms         â”‚ 1234
â”‚ status              â”‚ "success" | "error"
â”‚ error_message       â”‚
â”‚ created_at          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    QUICK START CHECKLIST                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  [ ] 1. Verify database tables exist
         â†’ Run: ./check-news.sh

  [ ] 2. Add 3+ news sources
         â†’ SQL: INSERT INTO news_sources ...

  [ ] 3. Run first manual crawl
         â†’ Run: php cron-crawler.php

  [ ] 4. Verify articles in database
         â†’ SQL: SELECT COUNT(*) FROM news_articles;

  [ ] 5. Set up cron job (automated crawling)
         â†’ crontab -e: 0 * * * * php cron-crawler.php

  [ ] 6. Visit dashboard
         â†’ https://staff.vapeshed.co.nz/index-ultra.php

  [ ] 7. Click "Feed View" button
         â†’ Should see mixed internal + external content

  [ ] 8. Test toggle (switch between views)
         â†’ Click again to go back to standard dashboard

  [ ] 9. Verify news cards render correctly
         â†’ Should have images, metadata, engagement stats

  [ ] 10. Monitor crawler (check it runs hourly)
          â†’ tail -f /tmp/news-crawler.log


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      KEY COMPONENTS                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AggregatorService.php - RSS CRAWLER                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  runScheduledCrawls()                                                   â”‚
â”‚  â”œâ”€â”€ Find sources WHERE next_crawl_at <= NOW()                          â”‚
â”‚  â”œâ”€â”€ Loop through each source (max 10)                                  â”‚
â”‚  â”œâ”€â”€ Call crawlSource($source)                                          â”‚
â”‚  â””â”€â”€ Sleep 2 seconds (rate limiting)                                    â”‚
â”‚                                                                         â”‚
â”‚  crawlRSS($source)                                                      â”‚
â”‚  â”œâ”€â”€ Download RSS XML via curl                                          â”‚
â”‚  â”œâ”€â”€ Parse with simplexml_load_string()                                 â”‚
â”‚  â”œâ”€â”€ Loop through <item> or <entry> elements                            â”‚
â”‚  â”œâ”€â”€ Extract: title, content, url, author, date, image                  â”‚
â”‚  â”œâ”€â”€ Check if external_id exists (deduplication)                        â”‚
â”‚  â”œâ”€â”€ INSERT or UPDATE news_articles                                     â”‚
â”‚  â””â”€â”€ Log to news_crawl_log                                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FeedProvider.php - QUERY INTERFACE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  getUnifiedFeed($options)                                               â”‚
â”‚  â”œâ”€â”€ SELECT FROM news_articles                                          â”‚
â”‚  â”œâ”€â”€ LEFT JOIN news_sources                                             â”‚
â”‚  â”œâ”€â”€ WHERE category = ? (if specified)                                  â”‚
â”‚  â”œâ”€â”€ ORDER BY is_pinned DESC, priority ASC, published_at DESC           â”‚
â”‚  â”œâ”€â”€ LIMIT ? OFFSET ?                                                   â”‚
â”‚  â””â”€â”€ RETURN array of articles                                           â”‚
â”‚                                                                         â”‚
â”‚  getTrending($limit, $days)                                             â”‚
â”‚  â”œâ”€â”€ SELECT FROM news_articles                                          â”‚
â”‚  â”œâ”€â”€ WHERE published_at > DATE_SUB(NOW(), INTERVAL ? DAY)               â”‚
â”‚  â”œâ”€â”€ ORDER BY (view_count + click_count) DESC                           â”‚
â”‚  â”œâ”€â”€ LIMIT ?                                                            â”‚
â”‚  â””â”€â”€ RETURN top articles                                                â”‚
â”‚                                                                         â”‚
â”‚  recordView($articleId) / recordClick($articleId)                       â”‚
â”‚  â””â”€â”€ UPDATE news_articles SET view_count = view_count + 1 WHERE id = ?  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ dashboard-feed.php - PREMIUM FEED UI                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  1. LOAD DATA                                                           â”‚
â”‚     $feedProvider = new FeedProvider($conn);                            â”‚
â”‚     $externalNews = $feedProvider->getUnifiedFeed(['limit' => 15]);     â”‚
â”‚     $trendingNews = $feedProvider->getTrending(5, 7);                   â”‚
â”‚     $internalActivity = getRecentSystemActivity();                      â”‚
â”‚                                                                         â”‚
â”‚  2. MIX CONTENT                                                         â”‚
â”‚     foreach ($internalActivity as $activity)                            â”‚
â”‚         $recentActivity[] = $activity; // Orders, transfers, POs        â”‚
â”‚     foreach ($externalNews as $article)                                 â”‚
â”‚         $recentActivity[] = formatAsActivity($article); // News         â”‚
â”‚                                                                         â”‚
â”‚  3. SORT                                                                â”‚
â”‚     usort($recentActivity, pinned first, then timestamp DESC);          â”‚
â”‚                                                                         â”‚
â”‚  4. DISPLAY                                                             â”‚
â”‚     <div class="premium-dashboard-feed">                                â”‚
â”‚       <aside class="feed-sidebar-left">...</aside>                      â”‚
â”‚       <main class="feed-center">                                        â”‚
â”‚         foreach ($recentActivity as $activity)                          â”‚
â”‚           if (external) â†’ render news card                              â”‚
â”‚           else â†’ render internal activity card                          â”‚
â”‚       </main>                                                           â”‚
â”‚       <aside class="feed-sidebar-right">...</aside>                     â”‚
â”‚     </div>                                                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    TROUBLESHOOTING GUIDE                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ PROBLEM: No articles showing in feed
âœ… SOLUTION:
   1. Check database: SELECT COUNT(*) FROM news_articles;
   2. If 0, add sources: INSERT INTO news_sources ...
   3. Run crawler: php cron-crawler.php
   4. Verify: SELECT * FROM news_articles LIMIT 5;

âŒ PROBLEM: Crawler not running automatically
âœ… SOLUTION:
   1. Check cron: crontab -l
   2. Add if missing: 0 * * * * php cron-crawler.php
   3. Check logs: tail -f /tmp/news-crawler.log
   4. Test manual: php cron-crawler.php

âŒ PROBLEM: Images not displaying
âœ… SOLUTION:
   1. Check directory: ls -la /cache/news-images/
   2. Create if missing: mkdir -p /cache/news-images
   3. Fix permissions: chmod 755 /cache/news-images
   4. Check URLs: SELECT image_url FROM news_articles LIMIT 5;

âŒ PROBLEM: Toggle button doesn't work
âœ… SOLUTION:
   1. Check session: var_dump($_SESSION['dashboard_view']);
   2. Verify file exists: ls modules/base/templates/vape-ultra/views/dashboard-feed.php
   3. Check PHP errors: tail -f /var/log/apache2/error.log
   4. Test URL: index-ultra.php?toggle_view=1

âŒ PROBLEM: RSS feed returns error
âœ… SOLUTION:
   1. Test feed URL: curl -I https://example.com/feed/
   2. Check feed is RSS/Atom: curl https://example.com/feed/ | head -20
   3. Verify source is active: SELECT * FROM news_sources WHERE id = ?;
   4. Check crawl log: SELECT * FROM news_crawl_log WHERE source_id = ?;


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        MONITORING                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š CRAWLER STATISTICS
SELECT
    ns.name,
    COUNT(na.id) as total_articles,
    MAX(na.published_at) as latest,
    SUM(na.view_count) as views,
    SUM(na.click_count) as clicks
FROM news_sources ns
LEFT JOIN news_articles na ON ns.id = na.source_id
GROUP BY ns.id;

ğŸ“ˆ ENGAGEMENT METRICS
SELECT
    title,
    view_count + click_count as engagement,
    published_at
FROM news_articles
WHERE published_at > DATE_SUB(NOW(), INTERVAL 7 DAY)
ORDER BY engagement DESC
LIMIT 10;

ğŸ• CRAWL HEALTH
SELECT
    DATE(created_at) as date,
    COUNT(*) as crawls,
    SUM(articles_found) as articles,
    AVG(duration_ms) as avg_duration
FROM news_crawl_log
WHERE created_at > DATE_SUB(NOW(), INTERVAL 7 DAY)
GROUP BY DATE(created_at);


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         NEXT STEPS                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… News aggregator FULLY INTEGRATED
2. âœ… Premium feed UI COMPLETE
3. âœ… Toggle button WORKING
4. âœ… Documentation COMPREHENSIVE

ğŸ‘‰ NOW DO THIS:

   [ ] Run ./check-news.sh to verify setup
   [ ] Add 3+ vape industry RSS feeds
   [ ] Run php cron-crawler.php
   [ ] Visit index-ultra.php
   [ ] Click "Feed View"
   [ ] Enjoy your Facebook-style feed! ğŸ‰

ğŸ“š FULL DOCS:
   â€¢ SETUP_GUIDE.md - Complete setup instructions
   â€¢ HOW_IT_WORKS.md - Detailed explanation
   â€¢ QUICK_REF.md - Quick commands
   â€¢ README.md - Feature documentation
```
