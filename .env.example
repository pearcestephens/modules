# ========================================
# CIS Staff Portal - Environment Configuration
# ========================================
#
# SECURITY: This file must be located OUTSIDE public_html
# Location: /home/129337.cloudwaysapps.com/jcepnzzkmj/.env
# Permissions: chmod 600 .env (owner read/write only)
#
# DO NOT commit this file to git (.gitignore should block it)
# Use .env.example for templates (safe to commit)
#
# ========================================

# ========================================
# APPLICATION
# ========================================
APP_NAME="CIS Staff Portal"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://staff.vapeshed.co.nz
TIMEZONE=Pacific/Auckland

# ========================================
# DATABASE (Primary)
# ========================================
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=jcepnzzkmj
DB_USER=master_anjzctzjhr
DB_PASSWORD=wprKh9Jq63
DB_CHARSET=utf8mb4

# ========================================
# VEND / LIGHTSPEED RETAIL POS
# ========================================
# Main retail POS integration
# NOTE: Uses PERMANENT long-term access token (does not expire)
#
# Domain setup:
# - Domain prefix: e.g., "vapeshed" for vapeshed.vendhq.com
# - Full URL: https://{VEND_DOMAIN_PREFIX}.vendhq.com
#
VEND_DOMAIN_PREFIX=your_vend_domain
VEND_FULL_URL=https://your_vend_domain.vendhq.com
VEND_ACCESS_TOKEN=your_permanent_vend_access_token_here
VEND_API_VERSION=2.0
VEND_TIMEOUT=30
VEND_API_BASE=https://{VEND_DOMAIN_PREFIX}.vendhq.com/api/2.0

# ========================================
# XERO ACCOUNTING
# ========================================
# Financial integration
# NOTE: Uses PERMANENT long-term credentials (does not expire)
# OAuth2 token is refreshable but credentials remain constant
#
XERO_CLIENT_ID=your_xero_client_id
XERO_CLIENT_SECRET=your_xero_client_secret
XERO_TENANT_ID=your_xero_tenant_id
XERO_REDIRECT_URI=https://staff.vapeshed.co.nz/xero/callback
XERO_WEBHOOK_KEY=your_xero_webhook_key
XERO_SCOPE="accounting.transactions accounting.contacts accounting.settings"

# ========================================
# DEPUTY WORKFORCE MANAGEMENT
# ========================================
# Staff scheduling and timekeeping
# NOTE: Uses PERMANENT long-term access token (does not expire)
#
DEPUTY_ACCESS_TOKEN=your_permanent_deputy_access_token
DEPUTY_ENDPOINT=https://your-domain.deputy.com
DEPUTY_WEBHOOK_SECRET=your_deputy_webhook_secret
DEPUTY_TIMEOUT=30

# ========================================
# EMAIL / SMTP (SendGrid)
# ========================================
# SendGrid configuration for transactional emails
# NOTE: Uses permanent API key (does not expire)
#
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=your_sendgrid_api_key_here
SMTP_ENCRYPTION=tls
SMTP_FROM_ADDRESS=noreply@vapeshed.co.nz
SMTP_FROM_NAME="The Vape Shed"
SENDGRID_API_KEY=your_sendgrid_api_key_here

# ========================================
# AI SERVICES
# ========================================
# OpenAI (GPT models)
OPENAI_API_KEY=your_openai_api_key
OPENAI_ORG_ID=your_openai_org_id

# Anthropic (Claude models)
ANTHROPIC_API_KEY=your_anthropic_api_key

# ========================================
# GOOGLE SERVICES
# ========================================
GOOGLE_MAPS_API_KEY=your_google_maps_api_key
GOOGLE_ANALYTICS_ID=your_google_analytics_id

# ========================================
# SECURITY & ENCRYPTION
# ========================================
SESSION_SECRET=your_random_session_secret_here
ENCRYPTION_KEY=your_32_character_encryption_key
JWT_SECRET=your_jwt_secret_key_here
CSRF_TOKEN_NAME=csrf_token

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=info
LOG_PATH=/home/129337.cloudwaysapps.com/jcepnzzkmj/storage/logs
LOG_MAX_FILES=30
ERROR_HANDLER_ENABLED=true

# ========================================
# FILE STORAGE
# ========================================
UPLOAD_PATH=/home/129337.cloudwaysapps.com/jcepnzzkmj/storage/uploads
MAX_UPLOAD_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,csv,xlsx

# ========================================
# CACHE & SESSION
# ========================================
CACHE_DRIVER=file
CACHE_PATH=/home/129337.cloudwaysapps.com/jcepnzzkmj/storage/cache
SESSION_DRIVER=file
SESSION_LIFETIME=7200

# ========================================
# API RATE LIMITING
# ========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=60
RATE_LIMIT_PERIOD=60

# ========================================
# BACKUP & MAINTENANCE
# ========================================
BACKUP_PATH=/home/129337.cloudwaysapps.com/jcepnzzkmj/backups
BACKUP_RETENTION_DAYS=30
MAINTENANCE_MODE=false

# ========================================
# DEVELOPER / DEBUG
# ========================================
# Only enable in development!
QUERY_LOG_ENABLED=false
DEBUG_BAR_ENABLED=false
PROFILER_ENABLED=false

# ========================================
# OUTLET-SPECIFIC CREDENTIALS
# ========================================
#
# NOTE: Most outlet-specific credentials (NZ Post, CourierPost, etc.)
#       are stored in the DATABASE for security and per-outlet configuration.
#
# Database table: outlet_credentials
# Columns: outlet_id, service_name, api_key, api_secret, endpoint, config_json
#
# Services stored in DB:
# - NZ Post API credentials (per outlet)
# - CourierPost API credentials (per outlet)
# - Local courier service credentials
# - Outlet-specific payment gateway keys
# - Per-store supplier API keys
#
# Use Base\Config for GLOBAL credentials only.
# Use database for PER-OUTLET credentials.
#
# Example database query:
# SELECT api_key, api_secret FROM outlet_credentials
# WHERE outlet_id = ? AND service_name = 'nzpost'
#
# ========================================

# ========================================
# THIRD-PARTY INTEGRATIONS (Global)
# ========================================
# These are GLOBAL keys used across all outlets
# Outlet-specific keys go in database

# Payment Gateway (Global Merchant Account)
PAYMENT_GATEWAY_MERCHANT_ID=your_merchant_id
PAYMENT_GATEWAY_API_KEY=your_payment_gateway_key
PAYMENT_GATEWAY_SECRET=your_payment_gateway_secret

# SMS Provider (Global Account)
SMS_PROVIDER=your_sms_provider
SMS_API_KEY=your_sms_api_key
SMS_FROM_NUMBER=+64XXXXXXXXX

# Shipping API (Global if using single account)
# Note: If each outlet has own account, store in database instead
SHIPPING_API_KEY=your_global_shipping_key

# ========================================
# E-COMMERCE PLATFORMS
# ========================================
# vapeshed.co.nz credentials
ECOMMERCE_DB_HOST=127.0.0.1
ECOMMERCE_DB_NAME=your_ecommerce_db
ECOMMERCE_DB_USER=your_ecommerce_user
ECOMMERCE_DB_PASSWORD=your_ecommerce_password

# ========================================
# WEBHOOK ENDPOINTS
# ========================================
WEBHOOK_VEND_URL=https://staff.vapeshed.co.nz/webhooks/vend
WEBHOOK_XERO_URL=https://staff.vapeshed.co.nz/webhooks/xero
WEBHOOK_DEPUTY_URL=https://staff.vapeshed.co.nz/webhooks/deputy
WEBHOOK_SECRET=your_webhook_verification_secret

# ========================================
# MONITORING & ALERTS
# ========================================
# Sentry (Error tracking)
SENTRY_DSN=your_sentry_dsn_here

# Slack (Alerts)
SLACK_WEBHOOK_URL=your_slack_webhook_url
SLACK_ALERT_CHANNEL=#alerts

# ========================================
# FEATURE FLAGS
# ========================================
FEATURE_AI_INTELLIGENCE=true
FEATURE_DYNAMIC_PRICING=true
FEATURE_STOCK_FORECASTING=true
FEATURE_COMPETITOR_TRACKING=true
FEATURE_STAFF_PERFORMANCE=true

# ========================================
# END OF CONFIGURATION
# ========================================
