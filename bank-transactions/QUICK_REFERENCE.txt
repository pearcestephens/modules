â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    TABLE RENAMING - QUICK REFERENCE                          â•‘
â•‘                                                                              â•‘
â•‘  All homework complete. Ready to proceed with table renaming.                â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CURRENT STATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Database Name: jcepnzzkmj
Host: 127.0.0.1
User: jcepnzzkmj
Password: wprKh9Jq63

Current Table Names:
  â€¢ deposit_transactions (69 references)
  â€¢ bank_deposits (25 references)
  â€¢ deposit_transactions_new (15 references)
  â€¢ bank_reconciliation_manual_reviews (8 references)
  â€¢ audit_trail (5 references)


NEW TABLE NAMES (PROPOSED)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  deposit_transactions              â†’  bank_transactions_legacy
  bank_deposits                     â†’  bank_transactions_current
  deposit_transactions_new          â†’  bank_transactions_archive
  bank_reconciliation_manual_reviews  â†’  bank_manual_reviews
  audit_trail                       â†’  bank_audit_trail


FILES TO UPDATE: 46 TOTAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TIER 1 (CRITICAL):        19 files  - Production code, MUST update
TIER 2 (IMPORTANT):       17 files  - Services/cron, SHOULD update
TIER 3 (OPTIONAL):        10 files  - Archive/old code, NICE to update


KEY REFERENCES BREAKDOWN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bank Transactions Module:        8 files
Production Xero/Banking:         9 files
Services/Webhooks:               2 files
Backup/Archive Scripts:          8 files
Schema/SQL Files:                4 files
Configuration Files:             4 files
Documentation/Other:             11 files


CRITICAL FILES (TEST AFTER RENAME)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. /assets/cron/xero/check-bank-transactions.php
   â†’ Production cron job (runs daily)
   â†’ TEST: Manual execution

2. /banking-reconciliation-manual-reviews.php
   â†’ Production page (user-facing)
   â†’ TEST: Browser access

3. /webhooks/receive.php
   â†’ Data ingest from external systems
   â†’ TEST: Monitor logs for errors

4. /assets/functions/reporting.php
   â†’ Used by dashboards and reports
   â†’ TEST: Run all reports


EXECUTION CHECKLIST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â˜ Step 1: Backup database
â˜ Step 2: Backup all files
â˜ Step 3: Rename database tables
â˜ Step 4: Update TIER 1 files (19 files)
â˜ Step 5: Test all 9 APIs
â˜ Step 6: Update TIER 2 files (17 files)
â˜ Step 7: Test production operations
â˜ Step 8: Update TIER 3 files (10 files)
â˜ Step 9: Final verification in browser


BACKUP COMMANDS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Backup database
mysqldump -h 127.0.0.1 -u jcepnzzkmj -pwprKh9Jq63 jcepnzzkmj > \
  /backups/jcepnzzkmj_before_rename_$(date +%Y%m%d_%H%M%S).sql

# Backup files
cp -r /home/master/applications/jcepnzzkmj/public_html/modules/bank-transactions \
  /backups/bank_transactions_backup_$(date +%Y%m%d_%H%M%S)


DATABASE RENAME COMMANDS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

mysql -h 127.0.0.1 -u jcepnzzkmj -pwprKh9Jq63 jcepnzzkmj << SQL
ALTER TABLE deposit_transactions RENAME TO bank_transactions_legacy;
ALTER TABLE bank_deposits RENAME TO bank_transactions_current;
ALTER TABLE deposit_transactions_new RENAME TO bank_transactions_archive;
ALTER TABLE bank_reconciliation_manual_reviews RENAME TO bank_manual_reviews;
ALTER TABLE audit_trail RENAME TO bank_audit_trail;
SQL


VERIFICATION COMMANDS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Verify new table names exist
mysql -h 127.0.0.1 -u jcepnzzkmj -pwprKh9Jq63 jcepnzzkmj -e \
  "SHOW TABLES LIKE 'bank_%';"

# Count old references (should be 0 after updating files)
grep -r "deposit_transactions" /modules/bank-transactions/ 2>/dev/null | wc -l
grep -r "bank_deposits" /modules/bank-transactions/ 2>/dev/null | wc -l

# Count new references (should match file count)
grep -r "bank_transactions_legacy" /modules/bank-transactions/ 2>/dev/null | wc -l
grep -r "bank_transactions_current" /modules/bank-transactions/ 2>/dev/null | wc -l


ROLLBACK PROCEDURE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

If anything breaks, run these commands in order:

# 1. Restore database
mysql -h 127.0.0.1 -u jcepnzzkmj -pwprKh9Jq63 jcepnzzkmj < \
  /backups/jcepnzzkmj_before_rename_*.sql

# 2. Restore files
rm -rf /modules/bank-transactions
cp -r /backups/bank_transactions_backup_*/* /modules/bank-transactions/

# 3. Clear cache and verify
php /app.php --cache:clear
php /modules/bank-transactions/QUICK_BOT_TEST.php


DOCUMENTATION FILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸ“„ HOMEWORK_COMPLETE.md
   â†’ Summary of all homework, status, timeline

ðŸ“„ TABLE_RENAME_HOMEWORK.md
   â†’ Detailed audit, 46 files identified, risks assessed

ðŸ“„ TABLE_REFERENCES_LINE_MAPPING.md
   â†’ Exact line numbers, sed commands for execution

ðŸ“„ CIS_DATABASE_TABLES.md
   â†’ Database inventory, connections, table stats

ðŸ“„ AUDIT_REPORT.md
   â†’ Architecture overview, current status


ESTIMATED TIME
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Total: ~2 hours

  Prepare:              5 min
  DB Rename:            2 min
  TIER 1 Update:       30 min
  TIER 1 Test:          5 min
  TIER 2 Update:       30 min
  TIER 2 Test:         10 min
  TIER 3 Update:       20 min
  Final Verify:        15 min
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  TOTAL:             ~2 hours


READY TO PROCEED âœ…
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… All files identified
âœ… All dependencies mapped
âœ… All risks assessed
âœ… All backups prepared
âœ… All commands documented
âœ… All verification steps documented
âœ… Rollback procedure documented

Status: READY FOR EXECUTION

Next Step: Approve Phase 1 (Database Rename)

