

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  BANK TRANSACTIONS MODULE - COMPREHENSIVE ENDPOINT TEST[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mEnvironment:[0m
  PHP Version: 8.1.33
  Document Root: /home/master/applications/jcepnzzkmj/public_html
  Bot Bypass: [32mENABLED[0m
  User ID: 1


[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  1. DASHBOARD METRICS API[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Dashboard Metrics (Today)[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/dashboard-metrics.php?bot=true[0m
  Method: [35mGET[0m
  Response Code: [31m500[0m
  [33m⚠ WARNING: Received HTML response (bot bypass may have failed)[0m
  [33mResponse preview: 
        Fatal Error
        
            body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;backg...[0m

[1mTesting: Dashboard Metrics (Specific Date)[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/dashboard-metrics.php?bot=true&date=2025-10-01[0m
  Method: [35mGET[0m
  Response Code: [31m500[0m
  [33m⚠ WARNING: Received HTML response (bot bypass may have failed)[0m
  [33mResponse preview: 
        Fatal Error
        
            body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;backg...[0m

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  2. AUTO-MATCH SINGLE TRANSACTION[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[33mNote: Testing with transaction_id=1 (may not exist)[0m

[1mTesting: Auto-Match Single Transaction[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/auto-match-single.php?bot=true[0m
  Method: [35mPOST[0m
  Payload: [33m{"transaction_id":1,"csrf_token":"test_token"}[0m
  Response Code: [31m403[0m
  [31m✗ Success: false[0m
  [33mError: {"code":"INVALID_CSRF_TOKEN","message":"Invalid CSRF token"}[0m
  [36mResponse:[0m
  {
      "success": false,
      "error": {
          "code": "INVALID_CSRF_TOKEN",
          "message": "Invalid CSRF token"
      }
  }

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  3. AUTO-MATCH ALL TRANSACTIONS[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Auto-Match All Unmatched Transactions[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/auto-match-all.php?bot=true[0m
  Method: [35mPOST[0m
  Payload: [33m{"date":"2025-10-31","csrf_token":"test_token"}[0m
  Response Code: [31m403[0m
  [31m✗ Success: false[0m
  [33mError: {"code":"INVALID_CSRF_TOKEN","message":"Invalid CSRF token"}[0m
  [36mResponse:[0m
  {
      "success": false,
      "error": {
          "code": "INVALID_CSRF_TOKEN",
          "message": "Invalid CSRF token"
      }
  }

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  4. BULK AUTO-MATCH[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Bulk Auto-Match Multiple Transactions[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/bulk-auto-match.php?bot=true[0m
  Method: [35mPOST[0m
  Payload: [33m{"transaction_ids":[1,2,3],"csrf_token":"test_token"}[0m
  Response Code: [31m403[0m
  [31m✗ Success: false[0m
  [33mError: {"code":"INVALID_CSRF_TOKEN","message":"Invalid CSRF token"}[0m
  [36mResponse:[0m
  {
      "success": false,
      "error": {
          "code": "INVALID_CSRF_TOKEN",
          "message": "Invalid CSRF token"
      }
  }

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  5. BULK SEND TO REVIEW[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Bulk Send Transactions to Manual Review[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/bulk-send-review.php?bot=true[0m
  Method: [35mPOST[0m
  Payload: [33m{"transaction_ids":[1,2],"csrf_token":"test_token"}[0m
  Response Code: [31m403[0m
  [31m✗ Success: false[0m
  [33mError: {"code":"INVALID_CSRF_TOKEN","message":"Invalid CSRF token"}[0m
  [36mResponse:[0m
  {
      "success": false,
      "error": {
          "code": "INVALID_CSRF_TOKEN",
          "message": "Invalid CSRF token"
      }
  }

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  6. MATCH SUGGESTIONS[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Get Match Suggestions for Transaction[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/match-suggestions.php?bot=true&transaction_id=1[0m
  Method: [35mGET[0m
  Response Code: [31m500[0m
  [33m⚠ WARNING: Received HTML response (bot bypass may have failed)[0m
  [33mResponse preview: 
        Fatal Error
        
            body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;backg...[0m

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  7. REASSIGN PAYMENT[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Reassign Payment to Different Order[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/reassign-payment.php?bot=true[0m
  Method: [35mPOST[0m
  Payload: [33m{"payment_id":1,"old_order_id":1000,"new_order_id":2000,"reason":"Test reassignment","csrf_token":"test_token"}[0m
  Response Code: [31m403[0m
  [31m✗ Success: false[0m
  [33mError: {"code":"CSRF_VALIDATION_FAILED","message":"Invalid CSRF token"}[0m
  [36mResponse:[0m
  {
      "success": false,
      "error": {
          "code": "CSRF_VALIDATION_FAILED",
          "message": "Invalid CSRF token"
      }
  }

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  8. EXPORT TRANSACTIONS[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

[1mTesting: Export Transactions (CSV)[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/export.php?bot=true&format=csv&status=unmatched[0m
  Method: [35mGET[0m
  Response Code: [31m500[0m
  [33m⚠ WARNING: Received HTML response (bot bypass may have failed)[0m
  [33mResponse preview: 
        Fatal Error
        
            body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;backg...[0m

[1mTesting: Export Transactions (JSON)[0m
  URL: [34mhttps://staff.vapeshed.co.nz/modules/bank-transactions/api/export.php?bot=true&format=json&status=all[0m
  Method: [35mGET[0m
  Response Code: [31m500[0m
  [33m⚠ WARNING: Received HTML response (bot bypass may have failed)[0m
  [33mResponse preview: 
        Fatal Error
        
            body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;backg...[0m

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  SYNTAX CHECK ALL FILES[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

  bootstrap.php                                                [32m✓ PASS[0m
  api/dashboard-metrics.php                                    [32m✓ PASS[0m
  api/auto-match-single.php                                    [32m✓ PASS[0m
  api/auto-match-all.php                                       [32m✓ PASS[0m
  api/bulk-auto-match.php                                      [32m✓ PASS[0m
  api/bulk-send-review.php                                     [32m✓ PASS[0m
  api/match-suggestions.php                                    [32m✓ PASS[0m
  api/reassign-payment.php                                     [32m✓ PASS[0m
  api/export.php                                               [32m✓ PASS[0m
  controllers/BaseController.php                               [32m✓ PASS[0m
  controllers/DashboardController.php                          [32m✓ PASS[0m
  controllers/TransactionController.php                        [32m✓ PASS[0m
  models/BaseModel.php                                         [32m✓ PASS[0m
  models/TransactionModel.php                                  [32m✓ PASS[0m
  models/OrderModel.php                                        [32m✓ PASS[0m
  models/PaymentModel.php                                      [32m✓ PASS[0m
  models/AuditLogModel.php                                     [32m✓ PASS[0m
  lib/MatchingEngine.php                                       [32m✓ PASS[0m
  lib/ConfidenceScorer.php                                     [32m✓ PASS[0m
  views/dashboard.php                                          [32m✓ PASS[0m
  views/transaction-list.php                                   [32m✓ PASS[0m
  index.php                                                    [32m✓ PASS[0m

[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m
[1m[36m  TEST RESULTS SUMMARY[0m[0m
[1m[36m════════════════════════════════════════════════════════════════════════════════[0m[0m

  Total Tests: [1m10[0m
  Passed: [32m[1m0[0m[0m
  Failed: [31m[1m10[0m[0m
  Success Rate: [1m0%[0m

[31mFailed Tests:[0m
  • [31mdashboard-metrics[0m
  • [31mdashboard-metrics-date[0m
  • [31mauto-match-single[0m
  • [31mauto-match-all[0m
  • [31mbulk-auto-match[0m
  • [31mbulk-send-review[0m
  • [31mmatch-suggestions[0m
  • [31mreassign-payment[0m
  • [31mexport-csv[0m
  • [31mexport-json[0m

[1m[32m✓ Comprehensive endpoint testing complete![0m[0m

