# Consignments Module - Routes

## Overview
Route configuration and URL mapping for the Consignments module.

**Last Updated:** 2025-10-12 07:00 UTC

## Main Routes

### Page Routes
- `GET /consignments/` → `index.php` (Module landing page)
- `GET /consignments/pack` → `pack.php` (Pack operations interface)
- `GET /consignments/receive` → `receive.php` (Receive operations interface)

### API Routes (AJAX Endpoints)
| Method | Route | File | Purpose |
|--------|-------|------|---------|
| POST | `/api/add_line.php` | `api/add_line.php` | Add product line to transfer |
| POST | `/api/remove_line.php` | `api/remove_line.php` | Remove product line from transfer |
| POST | `/api/update_line_qty.php` | `api/update_line_qty.php` | Update line quantity |
| POST | `/api/search_products.php` | `api/search_products.php` | Product search functionality |
| POST | `/api/autosave.php` | `api/autosave.php` | Save form state |
| GET | `/api/autosave_load.php` | `api/autosave_load.php` | Load saved form state |
| POST | `/api/pack_submit.php` | `api/pack_submit.php` | Submit pack operation |
| POST | `/api/receive_submit.php` | `api/receive_submit.php` | Submit receive operation |
| POST | `/api/pack_lock.php` | `api/pack_lock.php` | Lock/unlock pack operation |

## Transfer Module Routes

### Hub Controller
- `GET /transfers/hub` → Hub dashboard and transfer overview
- `POST /transfers/hub/action` → Hub action processing

### Pack Controller  
- `GET /transfers/pack/{id}` → Pack transfer view
- `POST /transfers/pack/{id}/submit` → Submit packed transfer

### Receive Controller
- `GET /transfers/receive/{id}` → Receive transfer view
- `POST /transfers/receive/{id}/submit` → Submit received transfer

## Route Parameters
- `{id}` - Transfer ID (integer)
- `{action}` - Action type (string: submit, cancel, lock, unlock)

## Authentication
All routes require valid CIS session authentication. API routes additionally validate CSRF tokens.

## Error Handling
- Invalid routes return 404 via shared Router
- Unauthenticated access redirects to login
- API errors return JSON error envelopes

## URL Patterns
```
/consignments/                    # Module root
/consignments/pack               # Pack interface  
/consignments/receive            # Receive interface
/consignments/api/{endpoint}     # API endpoints
/consignments/transfers/{action} # Transfer workflows
```

---
*Generated by CIS Knowledge Base System*
