# Consignments Module - Views

## Overview
View templates and rendering system for the Consignments module.

**Last Updated:** 2025-10-12 07:00 UTC

## Layout Templates

### Base Layouts
| Template | File | Purpose |
|----------|------|---------|
| CIS Template | `_shared/views/layouts/cis-template.php` | Full CIS layout with sidebar |
| CIS Bare | `_shared/views/layouts/cis-template-bare.php` | Minimal CIS layout |
| CoreUI Base | `_shared/views/layouts/base-coreui.php` | CoreUI framework layout |

### Partial Views
| Partial | File | Purpose |
|---------|------|---------|
| Head | `_shared/views/partials/head.php` | HTML head, meta, assets |
| Topbar | `_shared/views/partials/topbar.php` | Top navigation bar |
| Sidebar | `_shared/views/partials/sidebar.php` | Left navigation sidebar |
| Footer | `_shared/views/partials/footer.php` | Page footer |

## Module Views

### Transfer Views
| View | File | Purpose |
|------|------|---------|
| Hub Index | `transfers/views/hub/index.php` | Transfer hub dashboard |
| Pack View | `transfers/views/pack/view.php` | Pack operation interface |
| Pack Full | `transfers/views/pack/full.php` | Full pack details |
| Receive View | `transfers/views/receive/view.php` | Receive operation interface |
| Receive Full | `transfers/views/receive/full.php` | Full receive details |

## Component Views
Views are modularized into reusable components:

### Pack Components
- `components/pack/action_footer_pack.php` - Pack action buttons
- `components/pack/add_products_modal.php` - Product selection modal
- `components/pack/pack_lines_table.php` - Pack lines display table

### Receive Components  
- `components/receive/action_footer_receive.php` - Receive action buttons
- `components/receive/receive_lines_table.php` - Receive lines table
- `components/receive/validation_modal.php` - Receive validation dialog

### Shared Components
- `components/_container_open.php` - Page container opening
- `components/_container_close.php` - Page container closing

## View Data Structure
Views receive standardized data arrays:

```php
// Page data
$pageData = [
    'title' => 'Page Title',
    'breadcrumbs' => [...],
    'assets' => ['css' => [...], 'js' => [...]],
    'user' => [...],
    'permissions' => [...]
];

// Module data
$moduleData = [
    'transfer' => [...],
    'lines' => [...],
    'products' => [...],
    'validation' => [...]
];
```

## Asset Management
Views use centralized asset management:

```php
// CSS includes
View::addCss('transfer-core.css');
View::addCss('transfer-pack.css');

// JS includes  
View::addJs('core/validation.js');
View::addJs('pack/pack-operations.js');
```

## Template Inheritance
Views follow inheritance pattern:
1. **Base Layout** - Core HTML structure
2. **Module Layout** - Module-specific wrapper
3. **Page View** - Specific page content
4. **Components** - Reusable UI elements

## Security Features
- **XSS Protection:** All output escaped via htmlspecialchars()
- **CSRF Tokens:** Forms include CSRF protection
- **Input Sanitization:** User data sanitized before display
- **Role-based Display:** Content filtered by user permissions

## Responsive Design
Views implement Bootstrap 4 responsive classes:
- Mobile-first approach
- Breakpoint-specific layouts
- Responsive tables and modals
- Touch-friendly interfaces

---
*Generated by CIS Knowledge Base System*
